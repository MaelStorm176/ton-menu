{% extends "admin/admin.html.twig" %}

{% block title %}
	Gestion des demandes de roles
{% endblock %}

{% block content %}
	<h3>Gestion des demandes de roles</h3>
	<div class="row">
		<div class="col">
			<table id="usersTable" class="table table-striped table-bordered" style="width:100%">
				<thead>
					<tr>
						<th>Utilisateur</th>
						<th>Nom Prénom</th>
						<th>Message</th>
						<th>Document</th>
						<th>Etats de la demande</th>
						<th>Date de la demande</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for demande in demandes %}
						<tr>
							<td>{{ demande.user.lastname }}
								{{ demande.user.firstname }}</td>
							<td>{{demande.name}}</td>
							<td>
								{{demande.message}}
							</td>
							<td>
								<a href="{{ asset('/document/' ~ demande.document) }}" target="_blank" class="mx-auto">
									<i class="fs-4 bi bi-filetype-pdf"></i>
								</a>
							</td>
							<td>
								{% if demande.accept == 0 %}
									En attente
								{% elseif demande.accept == 1 %}
									Accepté
                                {% else %}
                                    Demande refusée
								{% endif %}
							</td>
							<td>{{demande.sendAt|date('d/m/Y')}}</td>
							<td class="text-center">
								<a href="/admin/role/{{demande.user.id}}">
									<i class="fs-4 bi bi-check-square-fill"></i>
								</a>
								<a href="/admin/refuse/{{demande.user.id}}">
									<i class="fs-4 bi bi-x-square-fill"></i>
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
