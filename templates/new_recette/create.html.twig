{% extends 'base.html.twig' %}

{% block title %}Personnalisation d'une recette{% endblock %}

{% block body %}

    <div class="container">
    {{ form_start(recetteForm) }}

        <div class="row mt-5 mb-5">
            <div class="col-md-6">
                <h3>Liste des ingrédients</h3>
                <table id="ingredientsTable" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Choisir</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for ingredient in ingredients %}
                        <tr>
                            <td>{{ ingredient.name }}</td>
                            <td class="text-center">
                                <input type="checkbox" name="choosen_ingredient[]" value="{{ ingredient.id }}"/>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="col-md-6">
                <h3>Liste des tags</h3>
                <table id="tagsTable" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Choisir</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for tag in tags %}
                        <tr>
                            <td>{{ tag.name }}</td>
                            <td class="text-center">
                                <input type="checkbox" name="choosen_tag[]" value="{{ tag.id }}"/>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="parametrage-tab" data-bs-toggle="tab" data-bs-target="#parametrage" type="button" role="tab" aria-controls="parametrage" aria-selected="true">Paramétrage</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="photos-tab" data-bs-toggle="tab" data-bs-target="#photos" type="button" role="tab" aria-controls="photos" aria-selected="false">Photos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="etapes-tab" data-bs-toggle="tab" data-bs-target="#etapes" type="button" role="tab" aria-controls="etapes" aria-selected="false">Etapes</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="parametrage" role="tabpanel" aria-labelledby="parametrage-tab">
                <div class="row mt-3">
                    <div class="col-md-6">
                        {{ form_row(recetteForm.name) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_row(recetteForm.type) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_row(recetteForm.number_of_persons) }}
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-6">
                        {{ form_row(recetteForm.url) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_row(recetteForm.difficulty) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_row(recetteForm.budget) }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ form_row(recetteForm.preparationTime) }}
                    </div>
                    <div class="col-md-6">
                        {{ form_row(recetteForm.totalTime) }}
                    </div>

                </div>
            </div>
            <!-- PHOTOS -->
            <div class="tab-pane fade" id="photos" role="tabpanel" aria-labelledby="photos-tab">
                <div class="row mb-2">
                    <div class="col-md-12">
                        <div class="input-images"></div>
                    </div>
                </div>
            </div>

            <!-- ETAPES -->
            <div class="tab-pane fade" id="etapes" role="tabpanel" aria-labelledby="etapes-tab">
                <div class="row mb-2">
                    <div class="col-md-12">
                        <ul class="steps list-group"
                            data-index="{{ recetteForm.recipeSteps|length > 0 ? recetteForm.recipeSteps|last.vars.name + 1 : 0 }}"
                            data-prototype="{{ form_widget(recetteForm.recipeSteps.vars.prototype)|e('html_attr') }}"
                        >
                            {% for step in recetteForm.recipeSteps %}
                                <li class="list-group-item">{{ form_row(step.step) }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>



    {{ form_end(recetteForm) }}
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('file_uploader') }}
    {{ encore_entry_script_tags('add_recipe') }}
{% endblock %}
