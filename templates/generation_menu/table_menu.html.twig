<div class="mt-3">
    {% if is_granted('ROLE_USER') %}
        <div class="row mb-3">
            <div class="form-group d-flex align-items-center col-4">
                <select class="form-select w-50" name="select_nb_jour" id="select_nb_jour">
                    {% for i in range(2,7) %}
                        <option value="{{ i }}" {% if i is same as nb_jour %} selected {% endif %}>{{ i }} jours</option>
                    {% endfor %}
                </select>
            </div>

            <a class="btn btn-outline-primary col-2" href="{{ path('generation_menu',{nb_jour: nb_jour}) }}">Générer un nouveau menu</a>

            <!-- SAUVEGARDER LE MENU -->
            <form class="col-4" method="post" action="{{ path('save_menu') }}">
                <input type="hidden" id="id_menu" name="id_menu" value="{{ id_menu }}">
                <input type="hidden" name="nb_jour" value="{{ nb_jour }}">
                <textarea class="d-none" name="menu" id="menu" cols="30" rows="10">{{ json_menu|raw }}</textarea>
                <button type="submit" id="save_menu" class="btn btn-outline-primary">
                    <i class="bi bi-file-earmark-arrow-down-fill"></i>
                    Sauvegarder le menu
                </button>
            </form>

            <!-- EXPORTER LE MENU PAR MAIL -->
            <form id="send_menu" name="send_menu" class="col-2" method="post" action="#">
                <button type="submit" class="btn btn-outline-primary">Envoi des ingrédients par mail</button>
            </form>
        </div>
        <hr class="dropdown-divider">
    {% endif %}
    <!-- <p class="msgsend">{{msg}}</p> -->

    <div class="row m-0">
        <div class="col-md-12 col-sm-12 col-lg-12">
            <div class="d-flex flex-row justify-content-center justify-content-around align-items-center">
                {% for i in range(0,nb_jour-1) %}
                    <p id="jour_{{ i }}" class="my-auto d-flex flex-column align-items-center btn btn-outline-primary {% if i is same as 0 %} active {% endif %} rounded shadow-sm" style="width: 150px">
                        <span>{{ "now"| date_modify("+" ~ i ~ " day") | date("l","Europe/Paris") }}</span>
                        <span class="fw-bold">{{ "now"| date_modify("+" ~ i ~ " day") | date("d/m","Europe/Paris") }}</span>
                    </p>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-lg-12" id="midi">
            {% for i in range(0,nb_jour-1) %}
                <div class="bg-light row {% if i is same as 0 %} d-block {% else %} d-none {% endif %}" id="show_jour_{{ i }}">
                    <div id="carouselExampleControls_{{ i }}" class="carousel slide carousel-animation">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <div class="row p-3 justify-content-center">
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: entrees[i]} %}
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: plats[i]} %}
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: desserts[i]} %}
                                </div>
                                <div class="carousel-caption d-none d-md-block position-static">
                                    <h5>Midi</h5>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <div class="row p-3 justify-content-center">
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: entrees[i+nb_jour]} %}
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: plats[i+nb_jour]} %}
                                    {% include 'generation_menu/card_menu.html.twig' with {recette: desserts[i+nb_jour]} %}
                                </div>
                                <div class="carousel-caption d-none d-md-block position-static">
                                    <h5>Soir</h5>
                                </div>
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls_{{ i }}" role="button" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls_{{ i }}" role="button" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </a>
                    </div>
                </div>
            {% endfor %}
            </div>
        </div>
    </div>
</div>