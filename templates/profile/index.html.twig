{% extends 'base.html.twig' %}

{% block title %}Hello ProfileController!{% endblock %}

{% block body %}
<style>
	.form-control:focus {
		box-shadow: none;
		border-color: #BA68C8
	}

	.profile-button {
		background: rgb(99, 39, 120);
		box-shadow: none;
		border: none
	}

	.profile-button:hover {
		background: #682773
	}

	.profile-button:focus {
		background: #682773;
		box-shadow: none
	}

	.profile-button:active {
		background: #682773;
		box-shadow: none
	}

	.back:hover {
		color: #682773;
		cursor: pointer
	}

	.labels {
		font-size: 11px
	}

	.add-experience:hover {
		background: #BA68C8;
		color: #fff;
		cursor: pointer;
		border: solid 1px #BA68C8
	}
</style>
	<div class="container rounded bg-white mt-5 mb-5">
		<div class="row">
			<div class="col-md-3 border-right">
				<div class="d-flex flex-column align-items-center text-center p-3 py-5">
					<img  class="rounded-circle mt-5" width="150px" alt="profile_picture" src="{{ asset('/profile_picture/' ~ app.user.profilePicture) }}" id="output" loading="lazy">
					<span class="font-weight-bold">Edogaru</span>
					<span class="text-black-50">{{ user.email }}</span>
					<span> </span>
				</div>
			</div>
			<div class="col-md-5 border-right">
				<div class="p-3 py-5">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h4 class="text-right">Paramètres du profil</h4>
					</div>
					<div class="row mt-2">
						<div class="col-md-6"><label class="labels" for="prenom">Prénom</label><input id="prenom" type="text" class="form-control" placeholder="Prénom" value=""></div>
						<div class="col-md-6"><label class="labels" for="nom">Nom</label><input id="nom" type="text" class="form-control" value="" placeholder="Nom"></div>
					</div>
					<div class="row mt-3">
						<div class="col-md-12"><label class="labels">Email</label><input type="text" class="form-control disabled" value="{{ user.email }}" disabled></div>
						{{ form_start(form) }}

						{{ form_label(form.password, 'Mot de passe', {
							'label_attr': {'class': 'labels', 'for': 'password', 'placeholder': 'Nouveau mot de passe'}
						}) }}
						{{ form_widget(form.password) }}

						{{ form_label(form.profile_picture, 'Photo de profil', {
							'label_attr': {'class': 'labels'}
						}) }}
						{{ form_widget(form.profile_picture) }}

					</div>
					<div class="mt-5 text-center">
						{{ form_widget(form.validate) }}
					</div>
					{{ form_end(form) }}
				</div>
			</div>
			<div class="col-md-4">
				<div class="p-3 py-5">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h4 class="text-right">Derniers menus sauvegardés</h4>
					</div>
					<div class="row mt-2">
						{% if generated_menus %}
							<table class="table table-striped table-bordered">
								<thead>
									<tr>
										<th class="text-center">Généré le</th>
										<th class="text-center">Nb Jours</th>
										<th class="text-center">Action</th>
									</tr>
								</thead>
								<tbody>
								{% for menu in generated_menus %}
									<tr>
										<td class="text-center">{{ menu.createdAt|date("d/m/Y H:i") }}</td>
										<td class="text-center">{{ menu.nbJours }}</td>
										<td class="text-center"><a href="{{ path('generation_menu', {'id': menu.id, 'nb_jour': menu.nbJours}) }}" class="btn btn-primary">Voir</a></td>
									</tr>
								{% endfor %}
								</tbody>
							</table>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>

    <script>
        const loadFile = function (event) {
            const image = document.getElementById("output");
            image.src = URL.createObjectURL(event.target.files[0]);
        };
    </script>
{% endblock %}
